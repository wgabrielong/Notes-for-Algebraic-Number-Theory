\documentclass{amsart}
\usepackage[margin=1.1in]{geometry} 
\usepackage{amsmath}
\usepackage{tcolorbox}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{lastpage}
\usepackage{fancyhdr}
\usepackage{accents}
\usepackage{hyperref}
\usepackage{xcolor}
\usepackage{color}
\input{shortcuts.tex}
\setlength{\headheight}{40pt}


\newenvironment{solution}
  {\renewcommand\qedsymbol{$\blacksquare$}
  \begin{proof}[Solution]}
  {\end{proof}}
\renewcommand\qedsymbol{$\blacksquare$}

\usepackage{amsmath, amssymb, tikz, amsthm, csquotes, multicol, footnote, tablefootnote, biblatex, wrapfig, float, quiver, mathrsfs, cleveref, enumitem, upgreek}
\addbibresource{refs.bib}
\theoremstyle{definition}
\newtheorem{theorem}{Theorem}[section]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{exercise}[theorem]{Exercise}
\newtheorem{question}[theorem]{Question}
\newtheorem{example}[theorem]{Example}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{conjecture}[theorem]{Conjecture}
\newtheorem*{remark}{Remark}
\newtheorem{definition}[theorem]{Definition}
\numberwithin{equation}{section}
\begin{document}
\large
\title[Algebraic Number Theory]{MATH 223A: Algebraic Number Theory}
\author{Wern Juin Gabriel Ong}
\address{Bowdoin College, Brunswick, Maine 04011}
\email{gong@bowdoin.edu}
\urladdr{https://wgabrielong.github.io/}
\maketitle
\section*{Preliminaries}
These notes roughly correspond to the course \textbf{MATH 223A: Algebraic Number Theory} taught by Prof. Melanie Wood at Harvard University in the Fall 2023 semester. These notes are \LaTeX-ed after the fact with significant alteration and are subject to misinterpretation and mistranscription. Use with caution. Any errors are undoubtedly my own and any virtues that could be ascribed to these notes ought be attributed to the instructor and not the typist. 
\tableofcontents
\section{Lecture 1 -- 11th September 2023}
This is a first graduate course in algebraic number theory. We will study local fields. 

Let us understand the what and why of local fields. Local fields are interesting in the context of global fields. Let us consider some examples of global fields. 
\begin{example}[Number Fields]
  $K/\QQ$ where $[K:\QQ]<\infty$, finite extensions of $\QQ$. 
\end{example}
\begin{example}[Function Fields]
  Function fields of curves over finite fields $\FF_{q}$. 
\end{example}
One's first study of number theory seeks to treat $\ZZ\subseteq\QQ$, but there is a strong analogy between studying $\ZZ\subseteq\QQ$ and $\FF_{q}[t]\subseteq\FF_{q}(t)$. In particular, one can show that there is a bijection betwween smooth geometrically irreducible curves over $\FF_{q}$ up to isomorphism and finite extensions of $\FF_{q}(t)$ up to isomorphism. 
\begin{example}
  The field $\FF_{q}(t)$ is the field of rational functions of $\PP^{1}_{\FF_{q}}$. 
\end{example}
This is an example of the function field analogy, drawing connections between geometry over finite fields $\FF_{q}$ and $\CC$. In fact, function fields and number fields are the only examples of global fields. This was first studied in the 20th century through the study of class field theory, field extensions with Abelian Galois group, that saw similar methods applied to number fields and function fields of $C_{/\FF_{q}}$. Artin-Whaples axiomatized what was special about function fields and number fields by defining global fields and valuations. This led to a new approach to proving Dirichlet's unit theorem in the 1940s. Valuations will be our starting point for this class. 
\begin{definition}[Valuation]
  Let $K$ be a field. A valuation on $K$ is a function $|\cdot|:K\to\RR$ such that: 
  \begin{enumerate}[label=(\alph*)]
    \item $|x|\geq0$ for all $x\in K$ and $|x|=0$ if and only if $x=0$, 
    \item $|xy|=|x|\cdot|y|$, 
    \item and $|x+y|\leq|x|+|y|$. 
  \end{enumerate}
\end{definition}
Let us consider some valuations of fields. 
\begin{example}[Trivial Valuation]
  There is a trivial valuation
  $$\begin{cases}
  |x| = 0 & x=0 \\
  |x| = 1 & x\neq0
  \end{cases}$$
  on $K$. 
\end{example}
We can see that both $\RR$ and $\CC$ are fields with the ``standard'' valuations. Let $K$ be a number field. $K$ admits homomorphisms to $\RR$ and/or $\CC$ and inherits the absolute value from $\RR$ and/or $\CC$. More precisely, if $[K:\QQ]=n$, there are $n$ homomorphisms to $\CC$ giving $n$ possibly distinct valuations on $K$. 
\begin{example}
  The field $\QQ(i)$ is of degree $[\QQ(i):\QQ]=2$. $\QQ(i)$ has two maps to $\CC$, by $i\mapsto i$ and $i\mapsto -i$, each of which defines a norm on $\QQ(i)$. 
\end{example}
For any number field, each conjugate of a generator defines a homomorphism to $\CC$. 
\begin{example}[$\wp$-adic Valuation]
  Let $K$ be a number field and $\Ocal_{K}$ be its ring of algebraic integers. Let $\wp$ be a prime ideal of $\Ocal_{K}$. For each $x\in K$, $(x)$ is an ideal of $\Ocal_{K}$ admitting a factorization into prime ideals. Write $v_{\wp}(x)$ as the power of $\wp$ in the ideal-factorization of $(x)$. For any constant $c>1$, let $|x|=c^{-v_{\wp}(x)}$ for $x\neq0$ and $|x|=\infty$. 
\end{example}
In the $\wp$-adic valuation, things are ``small'' when they are divisible by large $\wp$-powers. In the case of number fields $K$, these are the only types of valuations on $K$. The $\wp$-adic valuation allows us to see primes of a field without passing through any rings. 

One defines a global field by stating that all valuations on the field have some global coherence, wheras in the case of local fields, we are only looking at one prime, that is only one of the valuations of a local field. We will get to the definition of local fields soon. Let us begin with some examples. 
\begin{example}
  The real numbers $\RR$. 
\end{example}
\begin{example}
  The complex numbers $\CC$. 
\end{example}
\begin{example}
  Let $p$ be a prime. The $p$-adic numbers $\QQ_{p}$ is a local field. 
\end{example}
\begin{exercise}
  Let $K$ be a number field and $v_{\wp}$ be the valuation with respect to the prime ideal $\wp$. Let $K_{\wp}$ be the completion of $K$ with respect to the metric $v_{\wp}$. $K_{\wp}$ is a local field. 
\end{exercise}
In this way, local fields only allow us to see one prime of a global field at a time. Note that $\RR$ arises as a local field via the completion with respect to a metric, as the completion of $\QQ$ with respect to the Euclidean norm. 

There are several connections between local and global fields as statements about global fields can sometimes be reduced to statements about global fields such as via local to global principles. 
\begin{theorem}[Hasse-Minkowski]
  Let $Q$ be a quadratic form over a number field $K$. The form $Q$ has a non-trivial solution over $K$ if and only if $Q$ has non-trivial solutions over every completion of $K$. 
\end{theorem}
We will study questions like these in the context of local fields. Continuing with our discussion, we can define discrete valuation rings as in \cite[\S 1]{Serre}. We will continue developing the theory as in this text in the coming semester. 
\begin{definition}[Discrete Valuation]
  Let $K$ be a field. The field $K$ is discretely valued if there is a surjective homomorphism $v:K^{\times}\to\ZZ$ such that $v(x+y)\geq\min\{v(x),v(y)\}$ and $v(0)=\infty$. 
\end{definition}
This allows us to define a Discrete Valuation ring, or DVR. 
\begin{definition}[DVR]
  Let $K$ be a field with discrete valuation $v$. Let 
  $$A=\{x\in K|v(x)\geq0\}$$
  is a discrete valuation ring with fraction field $K$. 
\end{definition}
Let us consider the following examples. 
\begin{example}
  Let $K=\QQ$ and $p$ a prime. $A=\ZZ_{(p)}=\{\frac{r}{s}|p\nmid s; r,s\in\ZZ\}\subsetneq\QQ$ is a DVR. 
\end{example}
\begin{example}
  Let $k$ be a field and $k((t))$ be the field of Laurent series on $k$, that is for some $n_{0}>-\infty$, $\sum_{n\geq n_{0}}a_{n}t^{n}$. There is a discrete valuation on the field of Laurent series by
  $$v\left(\sum_{n\geq n_{0}}a_{n}t^{n}\right)=n_{0}.$$
  the DVR $A$ here is just the power series on $k$, $k[[t]]$.
\end{example}
\begin{definition}[Uniformizer]
  An element $\pi\in K$ is a uniformizer if $v(\pi)=1$. 
\end{definition}
Let us consider the following example.
\begin{example}
  Let $\QQ$ be a field endowed with the $p$-adic valuation. All integers with prime $p$ appearing exactly once in the prime factorization is a uniformizer. 
\end{example}
Indeed, for $x\in A\setminus\{0\}$, we can write $x=\pi^{n}u$ for some $u\in A^{\times}$. Let $\mfrak=(\pi)=\pi A$ the ideal generated by $\pi$. We can show $\mfrak=\{x\in K|v(x)\geq1\}$ and that $\mfrak$ is a maximal ideal. We define the residue field to be $A/\mfrak$. 
\section{Lecture 2 -- 13th September 2023}
Let us begin by recalling some facts about integrality. 
\begin{definition}[Integral Domain]
  A ring $A$ is an integral domain if it has no zerodivisors, that is, there do not exist $a,b\in A\setminus\{0\}$ such that $ab=0$. 
\end{definition}
\begin{definition}[Integral Over]
  Let $A,B$ be rings and $A\subseteq B$. An element $x\in B$ is integral over $A$ if it is the root of some monic polynomial with coefficients in $A$. The ring $B$ is integral over $A$ if all its elements are integral over $A$. 
\end{definition}
\begin{definition}[Integrally Closed]
  A ring $A$ is integrally closed if all elements of the fraction field $K(A)$ are integral over $A$. 
\end{definition}
Let us consider some examples. 
\begin{example}
  $\ZZ$ is integrally closed. This is the content of Gauss' lemma. 
\end{example}
\begin{example}
  Let $K$ be a number field and $\Ocal_{K}$ be its ring of integers. $\Ocal_{K}$ is integrally closed. 
\end{example}
In fact, we can show that DVRs are also integrally closed. To do so, we first show the follwing lemma. 
\begin{lemma}
  Let $A$ be a DVR with fraction field $K(A)$. If $x_{1},\dots,x_{n}\in K(A)$ are such that $v(x_{i})>v(x_{1})$ for all $i\geq 2$, then $x_{1}+\dots+x_{n}\neq0$. 
\end{lemma}
\begin{proof}
  Suppose to the contrary $x_{1}+\dots+x_{n}=0$. Equivalently $x_{2}+\dots+x_{n}=-x_{1}$ and applying the valuation we see that $v(x_{2}+\dots+x_{n})\geq\min\{v(x_{2}),\dots,v(x_{n})\}>v(x_{1})=v(-x_{1})$ a contradiction since $v(x_{2}+\dots+x_{n})\neq v(x_{1})=v(-x_{1})$. 
\end{proof}
We can now show the desired fact. 
\begin{proposition}[DVRs Integrally Closed]\label{prop:DVR integrally closed}
  A DVR $A$ is integrally closed. 
\end{proposition}
\begin{proof}
Let $x\in K(A)$ such that it satisfies the monic polynomial in $A$
$$x^{n}+a_{n-1}x^{n-1}+\dots+a_{1}x+a_{0}=0.$$
We seek to show $x\in A$, that is, $v(x)\geq0$. Suppose to the contrary that $v(x)=-m$ for some $m>0$. Applying the discrete valuation on $A$ to the polynomial, we have $v(x^{n})=-mn$ and each of the latter summands have valuations at least $-(n-1)m>-nm=v(x^{n})$ since each of the $a_{i}$ have non-negative discrete valuations. Applying the lemma above, $x$ cannot be the root of the polynomial, giving a contradiction and showing that $v(x)\geq0$ as desired. 
\end{proof}
More explicitly, we can show that the condition in \Cref{prop:DVR integrally closed} in conjunction with the condition of having a unique nonzero prime ideal to characterize DVRs. 
\begin{proposition}\label{prop:DVR iff integrally closed and unique nonzero prime}
  A Noetherian integral domain $A$ is a DVR if and only if it is integrally closed and has a unique nonzero prime ideal. 
\end{proposition}
\begin{proof}
  See \cite[Ch. 1, \S 2, Prop. 3]{Serre}. 
\end{proof}
Let us narrow our focus to Dededekind domains and understand these through the lens of DVRs. To do this, we will first have to define localization. 
\begin{definition}[Localization]
  Let $A$ be an integral domain and $K(A)$ its fraction field. Let $S\subseteq A$ be a multiplicatively closed subset of $A$ containing 1. We define the localization of $A$ away from $S$ as the set 
  $$S^{-1}A=\left\{\frac{a}{s}|a\in A, s\in S\right\}$$
  under the operations of addition and multiplication.
\end{definition}
\begin{example}
  Let $S=A\setminus\{0\}$ then $S^{-1}A=K(A)$, the fraction field of $A$. 
\end{example}
\begin{example}
  Let $S=A^{\times}$ then $S^{-1}A=A$. 
\end{example}
The prime ideals in $A$ and $S^{-1}A$ are closely related in the following way: the prime ideals in $S^{-1}A$ are those prime ideals in $A$ not intersecting $S$. 
\begin{proposition}\label{prop:localization correspondence}
  There is a bijection between prime ideals of $A$ and $S^{-1}A$ sending a prime ideal $\wp\subseteq A$ to $S^{-1}\wp=\{\frac{p}{s}|p\in\wp,s\in S\}$ and conversely sending $\wp\subseteq S^{-1}A$ to $\wp\cap A$. 
\end{proposition}
\begin{proof}
  Let $\wp$ be a prime ideal of $A$ not intersecting $S$ and consider $\frac{ab}{s_{1}s_{2}}\in S^{-1}\wp$ where $a,b\in A, s_{1},s_{2}\in S$. There is $\frac{c}{s}\in S^{-1}\wp$ such that $\frac{ab}{s_{1}s_{2}}=\frac{c}{s}$ or equivalently that for some $t\in S$, we have $t(abs-cs_{1}s_{2})=0$ where $abst = cs_{1}s_{2}t$ and $abst\in\wp$. Noting $st\in S$ with $S$ multiplicatively closed and $S\cap\wp=\emptyset$ $ab\in\wp$ since $\wp$ is prime in $A$ and one of $a,b$ is in $\wp$. So one of $\frac{a}{s_{1}},\frac{b}{s_{2}}\in S^{-1}\wp$. One can also see by definition of $S^{-1}\wp=\{\frac{p}{s}|p\in\wp,s\in S\}$ that $S^{-1}\wp\cap A=\wp$. 
  \\\\
  Let $\overline{\wp}$ be a prime ideal in $S^{-1}A$. Under the homomomorphism of rings $\varphi:A\to S^{-1}A$, we know $\varphi^{-1}(\overline{\wp})=\{a\in A|\frac{a}{1}\in\overline{\wp}\}\subseteq A$ is a prime ideal. Suppose to the contrary that $S\cap\wp\neq\emptyset$ then $1\in\overline{\wp}$ and $\overline{\wp}=S^{-1}A$ contradicting that $\overline{\wp}$ is prime in $S^{-1}A$. One can also see that $S^{-1}\wp=\{\frac{a}{s}|a\in\wp,s\in S\}=\overline{\wp}$ proving the bijective correspondence. 
\end{proof}
\begin{example}
  Let $S=A\setminus\wp$ for $\wp$ a prime ideal. We write $A_{\wp}=S^{-1}A$ the localization of $A$ away from $\wp$. The ideals of $A_{\wp}$ are exactly those primes contained in $\wp$ so $A_{\wp}$ has a unique maximal ideal, that is, $A_{\wp}$ is a local ring. 
\end{example}
Introducing some notation, let $I\subseteq A$ be an ideal. We denote $I_{\wp}\subseteq A_{\wp}$ the ideal in $A_{\wp}$ generated by $I$. We will soon prove some equivalent conditions for a Noetherian integral domain to be a Dedekind domain. To do so, we require the following lemma. 
\begin{lemma}\label{lem:intersection of prime ideals}
  Let $A$ be an integral domain. We have an equality $\cap_{\wp\text{ prime}}A_{\wp}=A$. 
\end{lemma}
\begin{proof}
  Let $x\in\cap_{\wp\text{ prime}}A_{\wp}$ and write $x=\frac{a}{b}$. Consider the ideal $\afrak\subseteq A$ by $\afrak=\{c\in A|ca\in(b)\subseteq A\}$ which can be thought of as the ideal of denominators of $x$. For every prime $\wp$, $\afrak\not\subseteq\wp$ as $x\in A_{\wp}$ but every proper ideal is contained in some maximal ideal so we have $\afrak=A$, showing that $x\in A$. 
\end{proof}
We can now show the following theorem that we will use to characterize Dedekind domains. 
\begin{theorem}\label{thm: dedekind TFAE}
  Let $A$ be a Noetherian integral domain. The following are equivalent:
  \begin{enumerate}[label=(\roman*)]
    \item For every nonzero prime ideal $\wp\subseteq A$, $A_{\wp}$ is a DVR. 
    \item $A$ is integrally closed and of Krull dimension at most 1. 
  \end{enumerate}
\end{theorem}
This is \cite[Ch. 1, \S 1, Prop. 4]{Serre}. 
\begin{proof}
  (i)$\Longrightarrow$(ii) Suppose $\wp\subseteq A$ is a prime ideal and $\mfrak$ the maximal ideal containing $\wp$. The local ring $A_{\mfrak}$ contains the prime ideal $\wp_{\mfrak}$ by \Cref{prop:localization correspondence}. Since $\mfrak$ is prime, $A_{\mfrak}$ is a DVR by assumption and given that the sole prime ideal in a DVR is $(\pi)$ for $\pi$ some uniformizer, we have either $\wp_{\mfrak}=(0)$ or $\wp_{\mfrak}=(\pi)$ showing that $A$ is of Krull dimension 1. To see that $A$ is integrally closed, note that for some $x\in K(A)$ be integral over $A$. We want to show that $x\in A$ but $x\in A_{\wp}$ for all primes $\wp$ so by \Cref{lem:intersection of prime ideals}, $x\in A$ showing that $A$ is integrally closed. 
  \\\\
  (ii)$\Longrightarrow$(i) Suppose that $A$ is integrally closed and of Krull dimension at most 1. Let $\wp\subseteq A$ be a nonzero prime ideal and consider the localization $S^{-1}A$ for $S=A\setminus\wp$. The ring $S^{-1}A$ has a unique nonzero prime ideal $S^{-1}\wp$. By \Cref{prop:DVR iff integrally closed and unique nonzero prime}, it suffices to show that $S^{-1}A$ is integrally closed. Let $x\in K(S^{-1}A)=K(A)$ be integral over $S^{-1}A$ so it satisfies
  \begin{align}\label{eqn: dedekind domain TFAE}
    x^{n}+b_{n-1}x+\dots+b_{1}x+b_{0} &= 0
  \end{align}
  for some $b_{i}\in S^{-1}A$. Writing each $b_{i}=\frac{a_{i}}{s_{i}}$ for $a_{i}\in A, s_{i}\in S$, we can take $s=\prod_{i=0}^{n-1}s_{i}$ and multiply (\ref{eqn: dedekind domain TFAE}) by $s^{n}$ to yield 
  \small
  \begin{align*}
    0 &= s^{n}x^{n}+a_{n-1}\left(s_{n-1}^{n-1}\prod_{0\leq i\leq n-2}s_{i}^{n}\right)x^{n-1}+\dots+a_{1}\left(s_{1}^{n-1}\prod_{0\leq i\leq n-1, i\neq 1}s_{i}^{n}\right)x+a_{0}\left(s_{0}^{n-1}\prod_{1\leq i\leq 0}s_{i}^{n}\right) \\
    &= (sn)^{n} + a_{n-1}\left(\prod_{0\leq i\leq n-2}s_{i}\right)(sx)^{n-1}+\dots+a_{1}\left(s_{1}^{n-2}\prod_{0\leq i\leq n-1, i\neq 1}s_{i}^{n-1}\right)(sx)+a_{0}\left(s_{0}^{n-1}\prod_{1\leq i\leq 0}s_{i}^{n}\right)
  \end{align*}
  \normalsize
  wherein $sx\in A$ and each 
  \small
  $$a_{n-1}\left(\prod_{0\leq i\leq n-2}s_{i}\right), \dots, a_{1}\left(s_{1}^{n-2}\prod_{0\leq i\leq n-1, i\neq 1}s_{i}^{n-1}\right), a_{0}\left(s_{0}^{n-1}\prod_{1\leq i\leq 0}s_{i}^{n}\right)\in A.$$
  \normalsize
  so by $A$ being integrally closed we conclude $sx\in A$ and thus $x\in S^{-1}A$ as desired. 
\end{proof}
We use these equivalent conditions to define a Dedekind domain. 
\begin{definition}[Dedekind Domain]
  A Dedekind domain is a Noetherian integral domain $A$ that satisfies any one of the equivalent conditions in \Cref{thm: dedekind TFAE}. 
\end{definition}
Some examples of Dedekind domains are as follows. 
\begin{example}
  $\ZZ, \Ocal_{K}$ for $K$ a number field, $\FF_{q}[t]$, and $\CC[t]$ are all Dedekind domains. 
\end{example}
\begin{example}
  Any PID is a Dedekind domain. Using the fact that PIDs are UFDs, one can yield a valuation by considering factorizations of the ideal generated by an element into prime ideals. 
\end{example}
One can also show that the property of being a Dedekind domain is preserved under localization. 
\begin{proposition}
  If $A$ is a Dedekind domain and $S$ a multiplicative subset of $A$, the localization $S^{-1}A$ is a Dedekind domain. 
\end{proposition}
\begin{proof}
  We show condition (b) in \Cref{thm: dedekind TFAE}. By hypothesis $A$ is a Dedekind domain so it is integrally closed and of Krull dimension at most 1. Since prime ideals of $S^{-1}A$ are those of $A$ not meeting $S$, $S^{-1}A$ is also of Krull dimension at most 1. One then applies the proof in the latter part of \Cref{thm: dedekind TFAE} to show integral closure. 
\end{proof}
Let $A$ be an integral domain and $K(A)$ its field of fractions. For $x\in K(A)$, we want to assign a valuation to $A$ with respect to some prime ideal $\wp$ of $A$. We make sense of this in terms of fractional ideals which provide a notion of multiplicative inverse for ideals. 
\begin{definition}[Fractional Ideal]
  Let $A$ be an integral domain with fraction field $K(A)$. A fractional ideal of $A$ is a finitely generated $A$-submodule of $K(A)$. 
\end{definition}
Given two $A$-submodules of $K(A)$, we can multiply them 
$$IJ=\left\{\sum_{i=1}^{n}a_{i}b_{i}|a_{i}\in I,b_{i}\in J\right\}.$$
\begin{definition}[Invertible]
  An ideal $I$ is invertible if there exists $J$ such that $IJ=A$. 
\end{definition}
In the case of Dedekind domainsm we can show that every ideal is invertible. This is a key part of the proof of the unique factorization property in Dedekind domains, and can in fact be used to define Dedekind domains themselves. 
\begin{proposition}[Dedekind Ideals are Invertible]
  Let $A$ be a Dedekind domain. Every nonzero fractional ideal is invertible. 
\end{proposition}
\begin{proof}
  Let $A$ be a Dedekind domain and $I\subseteq A$ a fractional ideal. Let $J=\{x\in K|xI\subseteq A\}$. We have $IJ\subseteq A$. Suppose to the contrary that $IJ\subsetneq A$. The ideal $IJ$ is contained in some maximal ideal $\mfrak$ so localizing at $\mfrak$ we have $J_{\mfrak}=\{x\in K|x I_{\mfrak}\in A_{\mfrak}\}$, that is, the inverse of $I_{\mfrak}$ as fractional ideals of $A_{\mfrak}$. In particular, observe $(IJ)_{\mfrak}=I_{\mfrak}J_{\mfrak}=A_{\mfrak}$, a contradiction as $IJ\subseteq\mfrak$. 
\end{proof}
We apply this to the factorization of ideals. 
\begin{theorem}[Factorization in Dedekind Domains]
  Let $A$ be a Dedekind domain. Every fractional ideal $I$ can be written uniquely as 
  $$I=\prod_{\wp_{i}\text{ prime}}\wp_{i}^{e_{i}}$$
  only finitely many $e_{i}$ nonzero. 
\end{theorem}
The proof of uniqueness was given in class. For existence, we adapt the proof from \cite[\S 3, Thm. 14]{Marcus}.
\begin{proof}
  (Existence) Suppose to the contrary that there is some collection of ideals not admitting a decomposition into prime dieals as above. Let $\qfrak$ be the maximal among such ideals not admitting a decomposition into primes where $\qfrak\neq A$ as $A$ is the empty product. Let $\pfrak$ be a prime ideal of $A$ containing $\qfrak$ and note that $\pfrak=\qfrak\afrak$ for some ideal $\afrak\subseteq A$ since $\qfrak\subseteq\pfrak$ implies $\pfrak|\qfrak$. But $\afrak$ contains $\qfrak$ so $\qfrak|\afrak$ and in fact $\qfrak\subsetneq\afrak$ as otherwise $\afrak=\qfrak$ and $\qfrak=\pfrak\qfrak$ implying $A=\pfrak$ a contradiction as $\pfrak$ was taken to be prime and hence proper. Using $\qfrak\subsetneq\afrak$ we have $\afrak$ is a product of primes and so is $\qfrak$, a contradiction. 
  \\\\
  (Uniqueness) Let $I\subseteq A$ be an ideal admitting a decomposition by 
  $$I=\prod_{\wp_{i}\text{ prime}}\wp_{i}^{e_{i}}.$$
  For each $\wp_{i}$, $I_{\wp_{i}}$ is an ideal in the DVR $A_{\wp_{i}}$ and $e_{i}=v_{\wp_{i}}(x)$ for $x$ a generator of $I_{\wp_{i}}$ in $A_{\wp_{i}}$.
\end{proof}
Returning to integrality, we prove the following statement that we will later use. 
\begin{proposition}\label{prop:integral over iff finite generation as a module}
  Let $A\subseteq B$ be rings. The elements $b_{1},\dots,b_{n}\in B$ are integral over $A$ if and only if $A[b_{1},\dots,b_{n}]$ is finitely generated as an $A$-module. 
\end{proposition}
Note that $A[b_{1},\dots,b_{n}]$ is finitely generated as an $A$-algebra, we are asking for something stronger. 
\begin{proof}
  $(\Longrightarrow)$ By induction, it suffices to show that if $b\in B$ is integral over $A$ the ring $A[b]$ is finitely generated as an $A$-module. Suppose $b\in B$ is integral over $A$ so 
  $$b^{n}+a_{n-1}b^{n-1}+\dots+a_{1}b+a_{0}=0$$
  for some $a_{0}, a_{1},\dots, a_{n-1}\in A$. Thus $A[b]$ is generated by $1, b, \dots,b^{n-1}$ as an $A$-module, that is, finitely generated as an $A$-module. 
  \\\\
  $(\Longleftarrow)$ Suppose $w_{1},\dots,w_{m}$ generate $A[b_{1},\dots,b_{n}]$ as an $A$-module. For $b\in A[b_{1},\dots,b_{n}]$ and any $w_{i}$ we can write 
  $$bw_{i}=\sum_{j=1}^{m}a_{ij}w_{j}$$
  with $a_{ij}\in A$. We use this $A$-linear expression to construct an integral dependence polynomial. Let 
  $$M=\begin{bmatrix}
    b-a_{11} & -a_{12} & \dots & -a_{1m} \\
    -a_{21} & b-a_{22} & \dots & a_{2m} \\
    \vdots & \vdots & \ddots & \vdots \\
    -a_{m1} & -a_{m2} & \dots & b-a_{mm}
  \end{bmatrix}.$$
  Observe that 
  $$M\begin{bmatrix}
    w_{1} \\ \vdots \\ w_{m}
  \end{bmatrix}=0_{m}$$
  so for $M^{*}$ the adjoint matrix satisfying $M^{*}M=\det M I_{m}$ we can consider the equation 
  $$M^{*}M\begin{bmatrix} w_{1}\\ \vdots\\ w_{m}\end{bmatrix}=\det M\begin{bmatrix}
    w_{1} \\ \vdots \\ w_{m}
  \end{bmatrix}=0_{m}$$
  as $1$ can be written as a linear cobmination of the $w_{i}$s. Thus $\det M$ is a monic in $A$ satisfied by $b\in A[b_{1},\dots,b_{n}]$ showing that $A[b_{1},\dots,b_{n}]$ is integral over $A$. 
\end{proof}
\section{Lecture 3 -- 18th September 2023}
Let us recall \Cref{prop:integral over iff finite generation as a module} with which we ended the previous lecture. 
\begin{proposition}[=\Cref{prop:integral over iff finite generation as a module}]
  Let $A\subseteq B$ be rings. The elements $b_{1},\dots,b_{n}\in B$ are integral over $A$ if and only if $A[b_{1},\dots,b_{n}]$ is finitely generated as an $A$-module. 
\end{proposition}
One can deduce the following corollaries. 
\begin{corollary}\label{corr: integral elements are subring}
  Let $A\subseteq B$ be rings. The elements of $B$ integral over $A$ form a subring of $B$. 
\end{corollary}
% Maybe edit this. 
\begin{proof}
  If $b_{1},b_{2}\in B$ are integral over $A$ then $b_{1}b_{2}, b_{1}+b_{2}\in A[b_{1},b_{2}]$. 
\end{proof}
\begin{corollary}
  Let $A\subseteq B\subseteq C$ be a tower of rings. If $B$ is integral over $A$ and $C$ is integral over $B$ then $C$ is integral over $A$. 
\end{corollary}
% Maybe edit this. 
\begin{proof}
  If $c_{i}$ generate $C$ over $B$ and the $b_{j}$ generate $B$ over $A$ then the $c_{i}b_{j}$ generate $C$ over $A$. 
\end{proof}
We now turn to extensions of Dedekind domains. More precisely, let $A$ be a Dedekind domain and $K$ its fraction field. Let $B$ be the integral closure of $A$ in $L$. 
$$% https://q.uiver.app/#q=WzAsNCxbMCwwLCJCIl0sWzAsMSwiQSJdLFsyLDAsIkwiXSxbMiwxLCJLIl0sWzEsMywiIiwyLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoiaG9vayIsInNpZGUiOiJ0b3AifX19XSxbMCwyLCIiLDIseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJob29rIiwic2lkZSI6InRvcCJ9fX1dLFswLDFdLFsyLDNdXQ==
\begin{tikzcd}
	B && L \\
	A && K
	\arrow[hook, from=2-1, to=2-3]
	\arrow[hook, from=1-1, to=1-3]
	\arrow[from=1-1, to=2-1]
	\arrow[from=1-3, to=2-3]
\end{tikzcd}$$
Let us consdier some examples from the number field and function field case. 
\begin{example}
  For a cubic extension of fields $\QQ(\sqrt[3]{2})/\QQ$, both $\ZZ$ and $\ZZ[\sqrt[3]{2}]$ are Dedekind domains. 
  $$% https://q.uiver.app/#q=WzAsNCxbMCwwLCJaWltcXHNxcnRbM117Mn1dIl0sWzAsMSwiXFxaWiJdLFsyLDAsIlxcUVEoXFxzcXJ0WzNdezJ9KSJdLFsyLDEsIlxcUVEiXSxbMSwzLCIiLDIseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJob29rIiwic2lkZSI6InRvcCJ9fX1dLFswLDIsIiIsMix7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Imhvb2siLCJzaWRlIjoidG9wIn19fV0sWzAsMV0sWzIsM11d
  \begin{tikzcd}
    {\ZZ[\sqrt[3]{2}]} && {\QQ(\sqrt[3]{2})} \\
    \ZZ && \QQ
    \arrow[hook, from=2-1, to=2-3]
    \arrow[hook, from=1-1, to=1-3]
    \arrow[from=1-1, to=2-1]
    \arrow[from=1-3, to=2-3]
  \end{tikzcd}$$
\end{example}
\begin{example}
  Fix some finite field $\FF_{q}$ of characteristic not 2. Let $A=\FF_{q}[t]$ with field of fractions $K=\FF_{q}(t)$. Let 
  $$L=\FF_{q}(t)[\sqrt{t^{3}+t+1}]=\FF_{q}(t)[s]/(s^{2}-t^{3}-t-1).$$
  One can verify that $[L:K]=2$ where $K$ are the functions on $\PP^{1}_{\FF_{q}}$ and $L$ are the functions on the elliptic curve $s^{2}=t^{3}+t+1$ (more often written $y^{2}=x^{3}+x+1$) and the extension of fields $L/K$ corresponds to the 2-1 map $E\to\PP^{1}_{\FF_{q}}$ from the elliptic curve to the projective line. The integral closure of $L$ in $A=\FF_{q}[t]$ is $B=\FF_{q}[t][\sqrt{t^{3}+t+1}]$. 
\end{example}
\begin{remark}
  One could also take $A=\FF_{q}[\frac{1}{t}]$ and the same extensions $L/K$. But now $\sqrt{t^{3}+t+1}$ is no longer integral over $A$. 
\end{remark}
\begin{proposition}
  If $A$ is a Dedekind domain with fraction field $K$ and $B$ the integral closure of $A$ in $L$ for $L/K$ a finite extention of fields, the ring $B$ is an integral domain with fraction field $L$. 
\end{proposition}
\begin{proof}
  The integral closure of $A$ in $L$ is a subring by \Cref{corr: integral elements are subring}. It remains to show that $B$ has fraction field $L$. 
\end{proof}
We want to show a stronger fact, that $B$ is in fact itself a Dedekind domain. This parallels what we have seen before. For $K$ a number field and $L/K$ a finite extension of fields, $\Ocal_{L}$ is also a Dedekind domain. We are seeking a proof that generalizes appropriately to non-separable extensions and the function field case. In this setting, we lose nice properties such as separability. But first, let us return to the simpler case of separable extensions. 
\\\\
To consider this case, we recall some notions from our first course in algebraic number theory. For an extension of fields $L/K$, multiplication by an element $x\in L$ gives a linear transformation of $K$-vector spaces $m_{x}:L\to L$ by $\alpha\mapsto x\alpha$. The linear transformation admits a trace which we denote $\Tr_{L/K}(x)=\mathrm{tr}(m_{x})$ and a norm $\Nm_{L/K}(x)=\det(m_{x})$. If further $L/K$ is a Galois extension, we can compute $\Tr_{L/K}(x)=\sum_{\sigma\in\Gal(L/K)}\sigma(x)$ and $\Nm_{L/K}(x)=\prod_{\sigma\in\Gal(L/K)}\sigma(x)$. Finally, recall that the $K$-bilinear form $\langle x,y\rangle=\Tr_{L/K}(xy)$ is nondegenerate if and only if $L/K$ is separable -- a bilinear form is nondegenerate if $\langle x,y\rangle=0$ for all $y$ then $x=0$. We can now prove the following. 
\begin{proposition}
  Let $A$ be a Dedekind domain with fraction field $K$ and $B$ the integral closure of $A$ in $L$ for $L/K$ a finite extention of fields. If further $L/K$ is separable, the ring $B$ is a finitely generated $A$-module (i.e. satisfies Serre's ``Hypothesis F''). 
\end{proposition}
This is \cite[Ch. 1, \S 4, Prop. 8]{Serre}. 
\begin{proof}
  For $x\in B$ we know it is integral over $A$ by hypothesis so $\Tr_{L/K}(x)\in A$ as it is an integral multiple of the coefficient of $x$ by \cite[\href{https://stacks.math.columbia.edu/tag/0BIH}{0BIH}]{stacks-project}. Let $\{e_{i}\}$ be a basis of $L$ over $K$. Without loss of generality, we can take $\{e_{i}\}\subseteq B$ by clearing denominators. Let $V$ be the free $A$-module spanned by the $\{e_{i}\}$. Using the trace map, we consider the dual module 
  $$V^{*}=\left\{x\in L|\Tr_{L/K}(xy)\in A, \forall y\in V\right\}.$$
  We have $V\subseteq B$ by inspection as the $\{e_{i}\}$ were chosen in $B$ and $B^{*}\subseteq V^{*}$ where $V^{*}$ is the free module spanned by the basis dual to $\{e_{i}\}$ with respect to the trace bilinear form the existence of which is given by separability. In particular, $B$ is an $A$-submodule of $V^{*}$ which was finitely generated by the finite dual basis. 
\end{proof}
To show that integral closures of Dedekind domains are Dedekind domains, however, will require some lemmata. 
\begin{lemma}\label{lem: equality of primes in B}
  If $\wp\subseteq\wp'$ are prime ideals of $B$ and $\wp\cap A=\wp'\cap A$ then $\wp=\wp'$. 
\end{lemma}
\begin{proof}
  Consider the quotient $B/\wp$ and for $x\in\wp'\setminus\wp$ its image $\overline{x}\in B/\wp$. Quotients are homomorphisms of rings so
  $$\overline{x}^{n}+\overline{a_{n-1}}\cdot\overline{x}^{n-1}+\dots+\overline{a_{1}}\cdot\overline{x}+\overline{a_{0}}=0$$
  and rearranging we see that $a_{0}\in(\overline{x})\subseteq\overline{A}$, that is, $a_{0}\in\overline{\wp'\cap A}$ but not $\overline{\wp\cap A}$ a contradiction. 
\end{proof}
\begin{lemma}\label{lem:descending chain stabilizes}
  In a 0-dimensional Noetherian ring, any descending chain of ideals stabilizes. 
\end{lemma}
We are now ready to prove the theorem. 
\begin{theorem}
  Let $A$ be a Dedekind domain with fraction field $K$ and $B$ the integral closure of $A$ in $L$ for $L/K$ a finite extention of fields. The ring $B$ is a Dedekind domain. 
\end{theorem}
\newpage
\printbibliography
\end{document}